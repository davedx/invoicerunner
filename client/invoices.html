<head>
  <title>Invoice Management Software, with Invoice Runner</title>
  <meta name="viewport" content="initial-scale=1">
</head>

<body>
</body>

<template name="layout">
  <div class="container">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <ul class="nav nav-left">
          <li class="hidden-phone">
            <a href="{{pathFor 'invoices'}}">Invoices</a>
          </li>
          <li class="visible-phone">
            <a id="nav_processing" href="{{pathFor 'invoices'}}?tab=processing">Processing</a>
          </li>
          <li class="visible-phone">
            <a id="nav_payable" href="{{pathFor 'invoices'}}?tab=payable">Payable</a>
          </li>
          <li>
            <a href="{{pathFor 'new-invoice'}}">New invoice</a>
          </li>
          {{#if isTrialAccount}}
          <li id="openfull-btn">
            <a href="{{pathFor 'accounts/new'}}">Open full account</a>
          </li>
          {{/if}}
        </ul>
        <ul class="nav pull-right nav-login">
          <li>
            {{loginButtons align="right"}}
          </li>
        </ul>
      </div>
    </div>

    <section class="main">
      {{yield}}
    </section>
  </div>
  <footer>
    {{yield "footer"}}
  </footer>
</template>

<template name="home">
  <h1>Home Page</h1>
</template>

<template name="invoices">

<div id="payment_modal" class="modal hide">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Pay invoice</h3>
  </div>
  <div class="modal-body">
    <p>Complete payment of this invoice using the company's payment details then click 'Paid' when done, or 'Cancel' to go back.</p>
    <div class="modal-details"></div>
  </div>
  <div class="modal-footer">
    <a href="#" data-dismiss="modal" class="btn">Cancel</a>
    <a href="#" class="btn btn-primary btn-paid">Paid</a>
  </div>
</div>

<div class="row">
  <div class="processing-tab tab {{tab_visible 'processing'}} span6">
    <h4 class="light">Processing</h4>

    <ul class="processing">
      {{#each processing}}
        <li>
        	<div class="box invoice">
        		<a class="pull-right btn btn-info" href="{{url}}">Open invoice</a>
            <form id="invoice-form_{{id}}" class="form-horizontal">
    	      	<h3>{{company}}</h3>
              <div class="control-group">
                <label class="control-label" for="subtotal">
                  Invoice number:
                </label>
                <div class="controls">
                  <input type="text" name="invoice_number" class="invoice_number" value="{{invoice_number}}">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="subtotal">
                  Due on:
                </label>
                <div class="controls">
                  <input type="date" name="date_due" class="date_due" value="{{date_due}}">
                  <div class="{{date_badge date_due}}">{{in_days date_due}}</div>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="subtotal">
                  Subtotal:
                </label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">$</span>
                    <input type="text" name="subtotal" class="subtotal" value="{{subtotal}}">
                  </div>
                </div>
              </div>
              <div class="control-group">
      	      	<label class="control-label" for="tax">
                  Tax:
                </label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">$</span>
                    <input type="text" name="tax" class="tax" value="{{tax}}">
                  </div>
                  <span class="tax-rate text-info">=~<strong class="tax_rate_amount">{{tax_rate}}%</strong></span>
                </div>
              </div>
              <div class="control-group">
      	      	<label class="control-label" for="total">
                  Total:
                </label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">$</span>
                    <input type="text" name="total" class="total" value="{{total}}">
                  </div>
                  <span class="text-error"><span class="{{total_validates true}}"></span>{{total_validates false}}</span>
                </div>
              </div>
              <div class="control-group">
      	      	<label class="control-label" for="approved">
                  Approved:
                </label>
                <div class="controls">
                  <input class="approved" type="checkbox" name="approved">
                </div>
              </div>
              <div class="control-group">
                <div class="controls">
        	      	<button class="btn-save btn">Save</button>
                  <div class="alert save-feedback">
                    Invoice saved.
                  </div>
                </div>
              </div>
            </form>
        	</div>
        </li>
      {{/each}}
    </ul>
  </div>
  <div class="payable-tab tab {{tab_visible 'payable'}} span6">
    <h4 class="light">Payable</h4>

    <ul class="payable">
      {{#each payable}}
        <li>
        	<div class="box invoice">
        		<a class="pull-right btn btn-info" href="{{url}}">Open invoice</a>
  	      	<h3>{{company}}</h3>
  	      	Invoice {{invoice_number}}<br>
  	      	<span class="{{date_badge date_due}}">{{long_date date_due}}{{in_days date_due}}</span><br>
            <div class="form-horizontal">

              <div class="control-group">
                <label class="control-label" for="subtotal">
                  Subtotal:
                </label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">$</span>
                    <input type="text" class="subtotal" value="{{subtotal}}" disabled>
                  </div>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="tax">
                  Tax:
                </label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">$</span>
                    <input type="text" class="tax" value="{{tax}}" disabled>
                  </div>
                  <span class="tax-rate text-info">=~<strong class="tax_rate_amount">{{tax_rate}}%</strong></span>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="total">
                  Total:
                </label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on">$</span>
                    <input type="text" class="total" value="{{total}}" disabled>
                  </div>
                  <span class="text-error"><span class="{{total_validates true}}"></span>{{total_validates false}}</span>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="approved">
                  Approved:
                </label>
                <div class="controls">
                  <input class="approved" type="checkbox" name="approved">
                </div>
              </div>
              <div class="control-group">
                <div class="controls">
                  <button class="btn-save btn">Save</button>
        	      	<button data-company-id="{{company_id}}" class="payment-button btn btn-primary">Pay invoice</button>
                </div>
              </div>
        	</div>
        </li>
      {{/each}}
    </ul>
  </div>
</div>
</template>

<template name="loading">
  <h1>Loading...</h1>
</template>

<template name="notFound">
  <h1>Not Found!</h1>
</template>